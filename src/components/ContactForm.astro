---
import { actions } from "astro:actions";

const url = new URL(Astro.request.url);
const source = url.searchParams.get("source") ?? "direct";
const status = url.searchParams.get("status");
---

<section class="l-section">
    <div class="l-container">
        <div class="list-2col">
            <div class="list-2col__unit list-2col__unit--title">
                Contact form
            </div>

            <div class="list-2col__unit list-2col__unit--form">
                <form class="form" method="post" action={actions.send}>
                    {
                        status == "sent" && (
                            <div class="form-notice">
                                Thanks for getting in touch. Your message has
                                been received and I will get back to you as soon
                                as I can.
                            </div>
                        )
                    }

                    <div class="form-group">
                        <label for="name">Name</label>
                        <span class="form-required">*</span>
                        <input type="text" id="name" name="name" required />
                    </div>

                    <div class="form-group">
                        <label for="email">Email address</label>
                        <span class="form-required">*</span>
                        <input type="email" id="email" name="email" required />
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone number</label>
                        <input type="tel" id="phone" name="phone" />
                    </div>

                    <div class="form-group">
                        <label for="message">Message</label>
                        <span class="form-required">*</span>
                        <textarea name="message" id="message" rows={6} required
                        ></textarea>
                    </div>

                    <input type="hidden" name="source" value={source} />

                    <button
                        class="button"
                        type="submit"
                        style="--total-words: 2;"
                    >
                        <span class="button__labels">
                            <span class="button__label button__label--default">
                                <span
                                    class="button__word"
                                    style="--word-index: 1;">Send</span
                                >
                                <span
                                    class="button__word"
                                    style="--word-index: 2;">message</span
                                >
                            </span>
                            <span
                                class="button__label button__label--hover"
                                aria-hidden="true"
                            >
                                <span
                                    class="button__word"
                                    style="--word-index: 1;">Send</span
                                >
                                <span
                                    class="button__word"
                                    style="--word-index: 2;">message</span
                                >
                            </span>
                        </span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>
